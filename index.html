<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Androidformenhancer by ksoichiro</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/ksoichiro/AndroidFormEnhancer">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/ksoichiro/AndroidFormEnhancer/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/ksoichiro/AndroidFormEnhancer/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Androidformenhancer</h1>
          <p>Framework for Android applications.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/ksoichiro">ksoichiro</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h1>AndroidFormEnhancer</h1>

<p>AndroidFormEnhancer is a library for implementing input forms easily in the Android application.
You can use annotations to describe the definitions of the input form briefly,
reduce codes that handle data of the screens in the Activities and Fragments.</p>

<p><img src="https://raw.github.com/ksoichiro/AndroidFormEnhancer/master/samples/images/screenshot.png" alt="Screenshot" title="Screenshots"></p>

<h1>Install</h1>

<p>The 'library' folder is the main library.
Please import it into the Eclipse or other IDEs.</p>

<h1>Usage</h1>

<ol>
<li>
<p>Create POJO class of the input form, define public fields and add annotations to them.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
    <span class="nd">@Required</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_age</span><span class="o">,</span> <span class="n">validateAfter</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
    <span class="nd">@IntType</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</li>
<li>
<p>If you use types other than String, create an entity class which fields has the same names as
the form class.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultEntity</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</li>
<li>
<p>Write the codes like following to the Activity or Fragment to extract data from the screen,
validate them and convert types.</p>

<div class="highlight"><pre><span class="n">ValidationResult</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FormHelper</span><span class="o">(</span><span class="n">DefaultForm</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">this</span><span class="o">).</span><span class="na">validate</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">hasError</span><span class="o">())</span> <span class="o">{</span>
    <span class="c1">// Show error messages</span>
    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">getAllSerializedErrors</span><span class="o">(),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// This entity object has clean and converted data</span>
    <span class="n">DefaultEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">helper</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">DefaultEntity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</li>
<li>
<p>If you want to validate as soon as the focus changed, just write these codes:</p>

<div class="highlight"><pre><span class="k">new</span> <span class="nf">FormHelper</span><span class="o">(</span><span class="n">DefaultForm</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">this</span><span class="o">).</span><span class="na">setOnFocusOutValidation</span><span class="o">();</span>
</pre></div>

<p>Note that this method affects only for the text fields.</p>
</li>
</ol><h1>Get input values</h1>

<p>To get input values from the layouts, create a Form class at first.
Form class is just a POJO class, which has public fields.
All the fields must be public and their types must be <code>String</code> or <code>java.util.List&lt;String&gt;</code>.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>Each fields must be related to the widgets like <code>android.widget.EditText</code>.
To create relationship with widgets, add special annotations to the fields.</p>

<h2>EditText</h2>

<p>If you use <code>&lt;EditText&gt;</code>, then just use <code>@Widget</code> for the related field of the Form class.
For example, if the part of your <code>res/layout/some_layout.xml</code> is like this:</p>

<div class="highlight"><pre><span class="nt">&lt;EditText</span>
    <span class="na">android:id=</span><span class="s">"@+id/textfield_name"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
</pre></div>

<p>then you should define your Form class like this:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<h2>RadioGroup and RadioButton</h2>

<p>If you use <code>&lt;RadioGroup&gt;</code> and <code>&lt;RadioButton&gt;</code>, and you want to validate
whether the one of the radio buttons is checked or not,
then use <code>@Widget</code> and <code>@WidgetValue</code> for the related field of the Form class.
For example, if the part of your <code>res/layout/some_layout.xml</code> is like this:</p>

<div class="highlight"><pre><span class="nt">&lt;RadioGroup</span>
    <span class="na">android:id=</span><span class="s">"@+id/rg_gender"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;RadioButton</span>
        <span class="na">android:id=</span><span class="s">"@+id/rb_male"</span>
        <span class="na">android:text=</span><span class="s">"Male"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;RadioButton</span>
        <span class="na">android:id=</span><span class="s">"@+id/rb_female"</span>
        <span class="na">android:text=</span><span class="s">"Female"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/RadioGroup&gt;</span>
</pre></div>

<p>then you should define your Form class like this:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">rg_gender</span><span class="o">,</span>
        <span class="n">values</span> <span class="o">=</span> <span class="o">{</span>
            <span class="nd">@WidgetValue</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">rb_male</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"M"</span><span class="o">),</span>
            <span class="nd">@WidgetValue</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">rb_female</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"F"</span><span class="o">),</span>
        <span class="o">})</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>If you choose radio button "Male", then the value of the <code>DefaultForm#gender</code> will be "M".</p>

<h2>CheckBox</h2>

<p>If you use <code>&lt;CheckBox&gt;</code> and you want to validate that at least one check box is checked,
then use <code>@Widget</code> and <code>@WidgetValue</code> for the related field of the Form class.
For example, if the part of your <code>res/layout/some_layout.xml</code> is like this:</p>

<div class="highlight"><pre><span class="nt">&lt;LinearLayout</span>
    <span class="na">android:id=</span><span class="s">"@+id/cbg_sns"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;CheckBox</span>
        <span class="na">android:id=</span><span class="s">"@+id/cb_facebook"</span>
        <span class="na">android:text=</span><span class="s">"Facebook"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;CheckBox</span>
        <span class="na">android:id=</span><span class="s">"@+id/cb_googleplus"</span>
        <span class="na">android:text=</span><span class="s">"Google+"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;CheckBox</span>
        <span class="na">android:id=</span><span class="s">"@+id/cb_twitter"</span>
        <span class="na">android:text=</span><span class="s">"Twitter"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p>then you should define your Form class like this:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cbg_sns</span><span class="o">,</span>
        <span class="n">atLeast</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span>
        <span class="n">values</span> <span class="o">=</span> <span class="o">{</span>
            <span class="nd">@WidgetValue</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cb_facebook</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"FB"</span><span class="o">),</span>
            <span class="nd">@WidgetValue</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cb_googleplus</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"GP"</span><span class="o">),</span>
            <span class="nd">@WidgetValue</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">cb_twitter</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"TW"</span><span class="o">)</span>
        <span class="o">})</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">sns</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>If you choose check boxes "Facebook" and "Google+", then the value of
the <code>DefaultForm#sns</code> will be <code>List&lt;String&gt;</code> which has 2 items "FB" and "GP".
Note that <code>@Widget</code> is used just for grouping same kind of <code>CheckBox</code>es,
so the other <code>ViewGroup</code>'s subclasses than <code>LinearLayout</code> like <code>RelativeLayout</code>
can be related to <code>@Widget</code>.</p>

<h2>Spinner</h2>

<p>If you use <code>&lt;Spinner&gt;</code>, then just use <code>@Widget</code> for the related field of the Form class.
For example, if the part of your <code>res/layout/some_layout.xml</code> is like this:</p>

<div class="highlight"><pre><span class="nt">&lt;Spinner</span>
    <span class="na">android:id=</span><span class="s">"@+id/spn_credit_card_type"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>
</pre></div>

<p>then you should define your Form class like this:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">spn_credit_card_type</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">creditCardType</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>If you want to use the head item as a dummy text like "Please select",
then set <code>Widget#headIsDummy</code> to <code>true</code> and add <code>@Required</code> annotation.
Then you can check whether the user selected other than the head item or not.</p>

<h1>Validations</h1>

<p>Following validation classes are available:</p>

<ol>
<li>
<p>RequiredValidator</p>

<ul>
<li>Validates the EditText's value is not <code>null</code> nor empty string.</li>
<li>The target fields must have field in Form class with <code>@Required</code>.</li>
<li>
<p>If you need value with some conditions, use <code>@When</code> as follows:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomRequiredWhenForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">spn_reason</span><span class="o">,</span> <span class="n">nameResId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">form_custom_required_when_reason</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">reason</span><span class="o">;</span>

    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_reason_other</span><span class="o">,</span> <span class="n">nameResId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">form_custom_required_when_reason_other</span><span class="o">,</span>
            <span class="n">validateAfter</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">spn_reason</span><span class="o">)</span>
    <span class="nd">@Required</span><span class="o">(</span><span class="n">when</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@When</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">spn_reason</span><span class="o">,</span> <span class="n">equalsTo</span> <span class="o">=</span> <span class="s">"2"</span><span class="o">)</span>
    <span class="o">})</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">reasonOther</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>If the user select the 3rd option from the spinner <code>R.id.spn_reason</code> and
the user does not input text field <code>R.id.textfield_reason_other</code>, then this validator
assume it is an error.</p>
</li>
</ul>
</li>
<li>
<p>IntTypeValidator</p>

<ul>
<li>Validates the EditText's value whether it is a valid integer format.</li>
<li>The target fields must have field in Form class with <code>@IntType</code>.</li>
</ul>
</li>
<li>
<p>MaxValueValidator</p>

<ul>
<li>Validates the EditText's value whether it is less than or equals to
the specified value.</li>
<li>The target fields must have field in Form class with <code>@MaxValue</code>.</li>
</ul>
</li>
<li>
<p>MinValueValidator</p>

<ul>
<li>Validates the EditText's value whether it is more than or equals to
the specified value.</li>
<li>The target fields must have field in Form class with <code>@MinValue</code>.</li>
</ul>
</li>
<li>
<p>IntRangeValidator</p>

<ul>
<li>Validates the EditText's value whether it is in the specified range:
the minimum value is <code>IntRange#min()</code> and the maximum value is <code>IntRange#max()</code>.</li>
<li>The target fields must have field in Form class with <code>@IntRange</code>.</li>
</ul>
</li>
<li>
<p>DigitsValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of digits (which means 0 through 9).</li>
<li>The target fields must have field in Form class with <code>@Digits</code>.</li>
</ul>
</li>
<li>
<p>AlphabetValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of ASCII alphabet characters.</li>
<li>The target fields must have field in Form class with <code>@Alphabet</code>.</li>
<li>If you want to allow space character, set <code>Alphabet#allowSpace()</code> to <code>true</code>.</li>
</ul>
</li>
<li>
<p>AlphaNumValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of ASCII alphabet characters.</li>
<li>The target fields must have field in Form class with <code>@AlphaNum</code>.</li>
<li>If you want to allow space character, set <code>AlphaNum#allowSpace()</code> to <code>true</code>.</li>
</ul>
</li>
<li>
<p>HiraganaValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of Japanese Hiragana.</li>
<li>The target fields must have field in Form class with <code>@Hiragana</code>.</li>
</ul>
</li>
<li>
<p>KatakanaValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of Japanese Katakana.</li>
<li>The target fields must have field in Form class with <code>@Katakana</code>.</li>
</ul>
</li>
<li>
<p>SinglebyteValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of single-byte characters.</li>
<li>The target fields must have field in Form class with <code>@Singlebyte</code>.</li>
</ul>
</li>
<li>
<p>MultibyteValidator</p>

<ul>
<li>Validates the EditText's value whether it consists only of multi-byte characters.</li>
<li>The target fields must have field in Form class with <code>@Multibyte</code>.</li>
</ul>
</li>
<li>
<p>LengthValidator</p>

<ul>
<li>Validates the EditText's value whether it has the specified length.</li>
<li>The target fields must have field in Form class with <code>@Length</code>.</li>
</ul>
</li>
<li>
<p>MaxLengthValidator</p>

<ul>
<li>Validates the EditText's value whether its length is less than or equals to
the specified length.</li>
<li>The target fields must have field in Form class with <code>@MaxLength</code>.</li>
</ul>
</li>
<li>
<p>NumOfDigitsValidator</p>

<ul>
<li>Validates the EditText's value whether its length is the specified length.</li>
<li>The target fields must have field in Form class with <code>@NumOfDigits</code>.</li>
<li>This validator resembles to the LengthValidator, but this validator
does not treat as an error if the value includes non-digit character even
though its length does not match <code>NumOfDigits#value()</code>.</li>
</ul>
</li>
<li>
<p>MaxNumOfDigitsValidator</p>

<ul>
<li>Validates the EditText's value whether its length is less than or equals to
the specified length.</li>
<li>The target fields must have field in Form class with <code>@MaxNumOfDigits</code>.</li>
<li>This validator resembles to the MaxLengthValidator, but this validator
does not treat as an error if the value includes non-digit character even
though its length exceeds <code>MaxNumOfDigits#value()</code>.</li>
</ul>
</li>
<li>
<p>DatePatternValidator</p>

<ul>
<li>Validates the EditText's value with date format.</li>
<li>The target fields must have field in Form class with <code>@DatePattern</code>.</li>
<li>Date format used in validation is <code>java.text.DateFormat.SHORT</code>, which will change with locale.</li>
<li>If you want to use custom format, use <code>DatePattern#value()</code>.</li>
</ul>
</li>
<li>
<p>PastDateValidator</p>

<ul>
<li>Validates the EditText's value is valid date format and past date.</li>
<li>The target fields must have field in Form class with <code>@PastDate</code>.</li>
<li>Date format used in validation is <code>java.text.DateFormat.SHORT</code>, which will change with locale.</li>
<li>If you want to use custom format, use <code>@DatePattern</code> annotation together.
PastDateValidator uses <code>DatePattern#value()</code>.</li>
<li>If you do not want to assume today as an error, set <code>PastDate#allowToday</code> to <code>true</code>.</li>
</ul>
</li>
<li>
<p>EmailValidator</p>

<ul>
<li>Validates the EditText's value whether it is e-mail format.</li>
<li>The target fields must have field in Form class with <code>@Email</code>.</li>
<li>Pattern to be used in validation is this: <code>^[\\w-]+(\\.[\\w-]+)*@([\\w][\\w-]*\\.)+[\\w][\\w-]*$</code>
</li>
<li>If you want to use custom format, define your format in your style
using <code>afeValidatorDefinitions</code> and <code>afeCustomEmailPattern</code>.</li>
</ul>
</li>
<li>
<p>RegexValidator</p>

<ul>
<li>Validates the EditText's value whether it matches the specified regular expression.</li>
<li>The target fields must have field in Form class with <code>@Regex</code>.</li>
<li>Regular expression must be specified by <code>Regex#value()</code>.</li>
</ul>
</li>
</ol><h1>Orders of the validation</h1>

<p>Orders of the validation for each items are defined by <code>Widget#validateAfter</code>.
For example, if you define form like following, the validators validate <code>name</code> at first,
then validate <code>age</code>.
Note that they are different from the orders in the screen.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultForm</span> <span class="o">{</span>
    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
    <span class="nd">@Required</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_age</span><span class="o">,</span> <span class="n">validateAfter</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
    <span class="nd">@IntType</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<h1>Customizations</h1>

<p>You can customize the behaviours and messages like following:</p>

<ol>
<li>
<p>Stop policy</p>

<p>Stop policy controls the validators to continue or stop
when they detected errors.
For example, if you want to validate all the items and show all the errors,
you should define your theme like this:</p>

<div class="highlight"><pre><span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourTheme"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidatorDefinitions"</span><span class="nt">&gt;</span>@style/YourValidatorDefinitions<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourValidatorDefinitions"</span> <span class="na">parent=</span><span class="s">"@style/AfeDefaultValidators"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeStopPolicy"</span><span class="nt">&gt;</span>continueAll<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>
</li>
<li>
<p>Available validations</p>

<p>You can enable or disable the standard validators.
You can also add your own validator.
For example, if you want to use only the RequiredValidator,
you should define your theme like this:</p>

<div class="highlight"><pre><span class="nt">&lt;string-array</span> <span class="na">name=</span><span class="s">"your_standard_validators"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item&gt;</span>com.androidformenhancer.validator.RequiredValidator<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/string&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourTheme"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidatorDefinitions"</span><span class="nt">&gt;</span>@style/YourValidatorDefinitions<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourValidatorDefinitions"</span> <span class="na">parent=</span><span class="s">"@style/AfeDefaultValidators"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeStandardValidators"</span><span class="nt">&gt;</span>@array/your_standard_validators<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>
</li>
<li>
<p>Validation error messages</p>

<p>You can override validation error messages.
For example, if you want to override the error message for the RequiredValidator,
You should define your theme like this:</p>

<div class="highlight"><pre><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"custom_msg_validation_required"</span><span class="nt">&gt;</span>You MUST fill in %1$s!<span class="nt">&lt;/string&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourTheme"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidatorMessages"</span><span class="nt">&gt;</span>@style/YourValidatorMessages<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourValidatorMessages"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeErrorRequired"</span><span class="nt">&gt;</span>@string/custom_msg_validation_required<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>

<p>The name of the item used in the error message is the name of the field in Form class.
If you want to change name, use annotation's <code>nameResId</code> attribute.
For example, if you define field like:</p>

<div class="highlight"><pre><span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
<span class="nd">@Required</span>
<span class="kd">public</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</pre></div>

<p>the error message will be "firstName is required".
If you define Form like this:</p>

<div class="highlight"><pre><span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">,</span> <span class="n">nameResId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">first_name</span><span class="o">)</span>
<span class="nd">@Required</span>
<span class="kd">public</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</pre></div>

<p>or</p>

<div class="highlight"><pre><span class="nd">@Widget</span><span class="o">(</span><span class="n">id</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textfield_name</span><span class="o">)</span>
<span class="nd">@Required</span><span class="o">(</span><span class="n">nameResId</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">first_name</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</pre></div>

<p>and define strings.xml like:</p>

<div class="highlight"><pre><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"first_name"</span><span class="nt">&gt;</span>First name<span class="nt">&lt;/string&gt;</span>
</pre></div>

<p>then the result will be "First name is required".</p>
</li>
<li>
<p>Error icons</p>

<p>You can change validation error icons as follows:</p>

<div class="highlight"><pre><span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourTheme"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidatorDefinitions"</span><span class="nt">&gt;</span>@style/YourValidatorDefinitions<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"YourValidatorDefinitions"</span> <span class="na">parent=</span><span class="s">"@style/AfeDefaultValidators"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidationIconError"</span><span class="nt">&gt;</span>@drawable/your_icon_error<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"afeValidationIconOk"</span><span class="nt">&gt;</span>@drawable/your_icon_ok<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>
</li>
</ol><h1>ProGuard</h1>

<p>If you want to use ProGuard, edit proguard-project.txt.</p>

<ol>
<li>
<p>Keep class name of the Validators. This is always required.</p>

<pre><code>-keep class com.androidformenhancer.validator.* { &lt;init&gt;(...); }
</code></pre>
</li>
<li>
<p>Keep class members (public fields) of the Forms and Entities.
If you use <code>FormHelper#create()</code> or <code>@When</code>, this is required.</p>

<pre><code>-keepclassmembers class com.androidformenhancer.sample.demos.DefaultForm {
  public *;
}
-keepclassmembers class com.androidformenhancer.sample.demos.DefaultEntity {
  public *;
}
</code></pre>
</li>
</ol><h1>Samples</h1>

<ul>
<li>Sample applications using this library are included in the samples folder.</li>
</ul><h1>Tests</h1>

<ul>
<li>Test codes for JUnit test are included in the tests folder.</li>
</ul><h1>Developed By</h1>

<ul>
<li>Soichiro Kashima - <a href="mailto:soichiro.kashima@gmail.com">soichiro.kashima@gmail.com</a>
</li>
</ul><h1>License</h1>

<pre><code>Copyright 2012 Soichiro Kashima

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>